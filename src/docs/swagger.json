{
  "openapi": "3.0.0",
  "info": {
    "title": "Social Platform API - Final",
    "version": "1.3.1",
    "description": "Complete documentation covering all edge cases, including group-specific comments and admin controls."
  },
  "servers": [
    { "url": "http://localhost:3000", "description": "Local Server" }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": { "type": "http", "scheme": "bearer", "bearerFormat": "JWT" }
    },
    "schemas": {
      "UserSignup": {
        "type": "object",
        "required": ["name", "nickname", "email", "password", "birthday"],
        "properties": {
          "name": { "type": "string" },
          "nickname": { "type": "string" },
          "email": { "type": "string", "format": "email" },
          "password": { "type": "string" },
          "birthday": { "type": "string", "format": "date" },
          "language": { "type": "array", "items": { "type": "string" } },
          "framework": { "type": "array", "items": { "type": "string" } },
          "address": { "type": "object", "properties": { "city": { "type": "string" }, "country": { "type": "string" } } }
        }
      },
      "PostCreate": {
        "type": "object",
        "required": ["content", "languageTag"],
        "properties": {
          "content": { "type": "string", "maxLength": 2000 },
          "languageTag": { "type": "array", "items": { "type": "string" } },
          "frameworkTag": { "type": "array", "items": { "type": "string" } }
        }
      },
      "GroupCreate": {
        "type": "object",
        "required": ["name", "description"],
        "properties": {
          "name": { "type": "string" },
          "description": { "type": "string" },
          "icon": { "type": "string" }
        }
      },
      "CommentBody": {
        "type": "object",
        "required": ["content"],
        "properties": {
          "content": { "type": "string", "maxLength": 500 }
        }
      }
    }
  },
  "security": [{ "bearerAuth": [] }],
  "tags": [
    { "name": "Authentication" },
    { "name": "Users" },
    { "name": "Posts" },
    { "name": "Groups" },
    { "name": "Follows" },
    { "name": "Comments" },
    { "name": "Admin" },
    { "name": "Notifications" }
  ],
  "paths": {
    "/api/users/signup": {
      "post": { "tags": ["Authentication"], "summary": "Register", "security": [], "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/UserSignup" } } } }, "responses": { "201": { "description": "Created" } } }
    },
    "/api/users/login": {
      "post": { "tags": ["Authentication"], "summary": "Login", "security": [], "requestBody": { "content": { "application/json": { "schema": { "type": "object", "properties": { "email": { "type": "string" }, "password": { "type": "string" } } } } } }, "responses": { "200": { "description": "OK" } } }
    },
    "/api/users/me": {
      "get": { "tags": ["Users"], "summary": "Get Profile", "responses": { "200": { "description": "OK" } } }
    },
    "/api/users/feed": {
      "get": { "tags": ["Users"], "summary": "Get Feed", "responses": { "200": { "description": "OK" } } }
    },
    "/api/posts": {
      "post": { "tags": ["Posts"], "summary": "Create Post", "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/PostCreate" } } } }, "responses": { "201": { "description": "OK" } } }
    },
    "/api/posts/{postId}": {
      "put": { "tags": ["Posts"], "summary": "Update Post", "parameters": [{ "name": "postId", "in": "path", "required": true }], "requestBody": { "content": { "application/json": { "schema": { "type": "object", "properties": { "content": { "type": "string" } } } } } }, "responses": { "200": { "description": "OK" } } },
      "delete": { "tags": ["Posts"], "summary": "Delete Post", "parameters": [{ "name": "postId", "in": "path", "required": true }], "responses": { "204": { "description": "Deleted" } } }
    },
    "/api/posts/{userId}/posts": {
      "get": { "tags": ["Posts"], "summary": "Get User Posts", "parameters": [{ "name": "userId", "in": "path", "required": true }], "responses": { "200": { "description": "OK" } } }
    },
    "/api/groups": {
      "post": { "tags": ["Groups"], "summary": "Create Group", "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/GroupCreate" } } } }, "responses": { "201": { "description": "OK" } } }
    },
    "/api/groups/{groupId}": {
      "post": { "tags": ["Groups"], "summary": "Join Group", "parameters": [{ "name": "groupId", "in": "path", "required": true }], "responses": { "200": { "description": "OK" } } }
    },
    "/api/groups/{groupId}/post": {
      "post": { "tags": ["Groups"], "summary": "Create Group Post", "parameters": [{ "name": "groupId", "in": "path", "required": true }], "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/PostCreate" } } } }, "responses": { "201": { "description": "OK" } } }
    },
    "/api/groups/{groupId}/posts": {
      "get": { "tags": ["Groups"], "summary": "Get Group Posts", "parameters": [{ "name": "groupId", "in": "path", "required": true }], "responses": { "200": { "description": "OK" } } }
    },
    "/api/follows/{userId}/follow": {
      "post": { "tags": ["Follows"], "summary": "Follow User", "parameters": [{ "name": "userId", "in": "path", "required": true }], "responses": { "201": { "description": "OK" } } }
    },
    "/api/follows/{userId}/unfollow": {
      "post": { "tags": ["Follows"], "summary": "Unfollow User", "parameters": [{ "name": "userId", "in": "path", "required": true }], "responses": { "200": { "description": "OK" } } }
    },
    "/api/follows": {
      "get": { "tags": ["Follows"], "summary": "My Connections", "responses": { "200": { "description": "OK" } } }
    },
    "/api/comments/{postId}": {
      "get": { "tags": ["Comments"], "summary": "Get Post Comments", "parameters": [{ "name": "postId", "in": "path", "required": true }], "responses": { "200": { "description": "OK" } } },
      "post": { "tags": ["Comments"], "summary": "Comment on Public Post", "parameters": [{ "name": "postId", "in": "path", "required": true }], "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CommentBody" } } } }, "responses": { "201": { "description": "OK" } } }
    },
    "/api/comments/{postId}/{groupId}": {
      "post": { "tags": ["Comments"], "summary": "Comment on Group Post", "parameters": [{ "name": "postId", "in": "path", "required": true }, { "name": "groupId", "in": "path", "required": true }], "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CommentBody" } } } }, "responses": { "201": { "description": "OK" } } }
    },
    "/api/comments/{commentId}": {
      "put": { "tags": ["Comments"], "summary": "Update Public Comment", "parameters": [{ "name": "commentId", "in": "path", "required": true }], "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CommentBody" } } } }, "responses": { "200": { "description": "OK" } } }
    },
    "/api/comments/{commentId}/{groupId}": {
      "put": { "tags": ["Comments"], "summary": "Update Group Comment", "parameters": [{ "name": "commentId", "in": "path", "required": true }, { "name": "groupId", "in": "path", "required": true }], "requestBody": { "content": { "application/json": { "schema": { "$ref": "#/components/schemas/CommentBody" } } } }, "responses": { "200": { "description": "OK" } } },
      "delete": { "tags": ["Comments"], "summary": "Delete Group Comment (User)", "parameters": [{ "name": "commentId", "in": "path", "required": true }, { "name": "groupId", "in": "path", "required": true }], "responses": { "200": { "description": "OK" } } }
    },
    "/api/admin/{groupId}/{userId}/ban": {
      "put": { "tags": ["Admin"], "summary": "Ban User", "parameters": [{ "name": "groupId", "in": "path", "required": true }, { "name": "userId", "in": "path", "required": true }], "responses": { "200": { "description": "OK" } } }
    },
    "/api/admin/{groupId}/{userId}/role": {
      "put": { "tags": ["Admin"], "summary": "Promote Member", "parameters": [{ "name": "groupId", "in": "path", "required": true }, { "name": "userId", "in": "path", "required": true }], "responses": { "200": { "description": "OK" } } }
    },
    "/api/admin/{groupId}": {
      "post": { "tags": ["Admin"], "summary": "Change Post Access", "parameters": [{ "name": "groupId", "in": "path", "required": true }], "responses": { "200": { "description": "OK" } } }
    },
    "/api/admin/{authorId}/{groupId}": {
      "post": { "tags": ["Admin"], "summary": "Admin Delete Comment", "parameters": [{ "name": "authorId", "in": "path", "required": true }, { "name": "groupId", "in": "path", "required": true }], "responses": { "200": { "description": "OK" } } }
    },
    "/api/notifications": {
      "get": { "tags": ["Notifications"], "summary": "Get Notifications", "responses": { "200": { "description": "OK" } } }
    }
  }
}